

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Django Rest - Back-End &mdash; Delivery Organico 0.0.1 documentation</title>
  

  
  
  
  
    <link rel="canonical" href="https://delivery-organico.readthedocs.iorest.html"/>
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="React Native - Mobile" href="react.html" />
    <link rel="prev" title="Vue.js - Front-End" href="vue.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Delivery Organico
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduccion</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="introduccion.html">Introduccion</a></li>
<li class="toctree-l1"><a class="reference internal" href="instalacion.html">Instalacion</a></li>
</ul>
<p class="caption"><span class="caption-text">Recorrido Basico</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contenidos.html">Los primeros pasos en Delivery Organico</a></li>
<li class="toctree-l1"><a class="reference internal" href="glosario.html">Glosario</a></li>
</ul>
<p class="caption"><span class="caption-text">Tecnologias</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="vue.html">Vue.js - Front-End</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Django Rest - Back-End</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#que-es-rest">¿Que es REST?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#porque-lo-utilizamos">¿Porque lo utilizamos?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#estructura-basica">Estructura basica</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#los-serializadores">Los serializadores</a></li>
<li class="toctree-l3"><a class="reference internal" href="#los-routers">Los routers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#las-views">Las views</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="react.html">React Native - Mobile</a></li>
</ul>
<p class="caption"><span class="caption-text">Avanzado</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="avanzado.html">Autenticacion</a></li>
<li class="toctree-l1"><a class="reference internal" href="avanzado.html#axios">AXIOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="avanzado.html#redux">REDUX</a></li>
</ul>
<p class="caption"><span class="caption-text">Extra</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Delivery Organico</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Django Rest - Back-End</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/rest.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="django-rest-back-end">
<h1>Django Rest - Back-End<a class="headerlink" href="#django-rest-back-end" title="Permalink to this headline">¶</a></h1>
<div class="line-block">
<div class="line"><a class="reference external" href="https://www.django-rest-framework.org/">Pagina oficial</a></div>
</div>
<div class="line-block">
<div class="line">Django REST es un framework podersos y flexible con herramientas para la creacion
APIs web.</div>
<div class="line">Su funcion es de modelo de comunicación entre el frontend y el backend.</div>
</div>
<div class="line-block">
<div class="line"><em>Lo importante es que el cliente no recibe HTML para renderizar, sino simplemente
los datos que se han generado como respuesta. Es decir, el servidor no escribe
HTML, sino únicamente genera los datos para enviarlos al cliente.</em></div>
</div>
<div class="section" id="que-es-rest">
<h2>¿Que es REST?<a class="headerlink" href="#que-es-rest" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line">REST deriva de “REpresentational State Transfer” (transferencia de representación
de estado). Un servicio REST no tiene estado, el servicio pierde todos sus datos
entre llamadas. Esto es, que no se puede llamar a un servicio REST y pasarle unos
datos (p. ej. un usuario y una contraseña) y esperar que “nos recuerde” en la
siguiente petición.</div>
</div>
<div class="line-block">
<div class="line">De ahí el nombre: el estado lo mantiene el cliente y por lo tanto es el cliente
quien debe pasar el estado en cada llamada. Si quiero que un servicio REST me
recuerde, debo pasarle quien soy en cada llamada.</div>
</div>
</div>
<div class="section" id="porque-lo-utilizamos">
<h2>¿Porque lo utilizamos?<a class="headerlink" href="#porque-lo-utilizamos" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line"><strong>Separación cliente/servidor e Independecia de tecnologias</strong></div>
<div class="line">Estos se comunican con un lenguaje de intercambio (JSON,XML,…) y podemos hacer
varios Front-End (Web, Mobile, etc) con un único Back-End. Todo reciben los
datos de la misma manera y cada uno decide que hacer con ellos.</div>
</div>
</div>
<div class="section" id="estructura-basica">
<h2>Estructura basica<a class="headerlink" href="#estructura-basica" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line">DRF se basa fundamentalmente en 3 componentes: los serializadores, las vistas y
los routers.</div>
</div>
<div class="section" id="los-serializadores">
<h3>Los serializadores<a class="headerlink" href="#los-serializadores" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">Asociado a los modelos. Nos permiten definir al detalle
cómo serán las respuestas que devolverá nuestro API y cómo procesaremos el
contenido de las peticiones que nos lleguen.</div>
</div>
<p>Los atributos, de la clase <code class="docutils literal notranslate"><span class="pre">AddressSerializer</span></code>, que estan en <code class="docutils literal notranslate"><span class="pre">fields=</span></code>
son los elegidos que API puedo manejar:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AddressSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
<span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
    <span class="n">model</span><span class="o">=</span><span class="n">Address</span>
    <span class="n">fields</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;alias&#39;</span><span class="p">,</span><span class="s1">&#39;address&#39;</span><span class="p">,</span><span class="s1">&#39;floor&#39;</span><span class="p">,</span><span class="s1">&#39;phone&#39;</span><span class="p">,</span><span class="s1">&#39;st_number&#39;</span><span class="p">,</span><span class="s1">&#39;zip_code&#39;</span><span class="p">,</span><span class="s1">&#39;city&#39;</span><span class="p">,</span><span class="s1">&#39;locality&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="los-routers">
<h3>Los routers<a class="headerlink" href="#los-routers" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">Son una herramienta que nos permiten definir las urls de nuestro
API de una manera sencilla y ordenada. Nos permiten definir qué método
(GET, POST, PUT,…) se ejecutará al llegar una petición HTTP contra un path
concreto.</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">router</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;city&#39;</span><span class="p">,</span> <span class="n">CityViewSet</span><span class="p">,</span><span class="n">base_name</span><span class="o">=</span><span class="s2">&quot;city&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Hace referencia a un <code class="docutils literal notranslate"><span class="pre">ViewSet</span></code>, para que se pueda acceder a el con una
URL.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;city&quot;</span><span class="p">:</span> <span class="s2">&quot;http://127.0.0.1:8000/rest/city/&quot;</span><span class="p">,</span>
</pre></div>
</div>
</div>
<div class="section" id="las-views">
<h3>Las views<a class="headerlink" href="#las-views" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">Extensiones de las class-view de django. Sirva para simplificarnos
la union de los routers, los serializadores y los modelos. Como respuesta
devuelve json, xml, etc.</div>
</div>
<p>Ejemplo:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ProductViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">Product</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">ProductSerializer</span>

    <span class="nd">@action</span><span class="p">(</span><span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span><span class="s1">&#39;DELETE&#39;</span><span class="p">],</span> <span class="n">detail</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">object</span><span class="o">=</span><span class="n">Product</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span>
        <span class="nb">object</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s2">&quot;../../&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">ProductViewSet</span></code> relaciona todos los objetos de la clase <code class="docutils literal notranslate"><span class="pre">Product</span></code>
en un queryset: <code class="docutils literal notranslate"><span class="pre">queryset</span> <span class="pre">=</span> <span class="pre">Product.objects.all()</span></code> y la serializacion de
ese modelo <code class="docutils literal notranslate"><span class="pre">serializer_class</span> <span class="pre">=</span> <span class="pre">ProductSerializer</span></code> en un clase.</div>
</div>
<div class="line-block">
<div class="line">La funcion <code class="docutils literal notranslate"><span class="pre">delete</span></code>, toda la Primary Key <code class="docutils literal notranslate"><span class="pre">pk</span></code> y la utiliza
para borrar el objeto especifico de la base de datos, <code class="docutils literal notranslate"><span class="pre">object.delete()</span></code>.</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="react.html" class="btn btn-neutral float-right" title="React Native - Mobile" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="vue.html" class="btn btn-neutral" title="Vue.js - Front-End" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Martin Olivari

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>